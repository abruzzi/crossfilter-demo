<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" content="">
        <title>TWer shapes</title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.css" />

        <style type="text/css">
            .line {
              fill: none;
              stroke: #AC145A;
              stroke-width: 1px;
            }

            .axis line {
              stroke: #cccccc;
            }

            .axis path {
              fill: none;
              stroke: #cccccc;
            }

            .axis + .axis g text {
              display: none;
            }

            .tick {
              display: none;
            }

            .shape {
              fill: none;
              stroke: #AC145A;
              stroke-width: 1px;
            }

            .shape-baseline {
              fill: none;
              stroke: #AC145A;
              stroke-width: 1px;
              opacity: .2;
            }
        </style>


    </head>
    <body>

        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-1"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-2"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-3"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-4"></div>
            </div>

            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-5"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-6"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-7"></div>
                <div class="col-lg-3 col-md-3 col-sm-3" id="twer-8"></div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.7.0/lodash.min.js"></script>
        <script src="scripts/shape-chart.js"></script>

        <script type="text/javascript">

        window.onload = function() {

            var chart = shapeChart();

            _.each(["15356", "12399", "17608", "15812", "15683", "14256", "13970", "13906"], function(value, index) {
                d3.json("data/jigsaw.skills.for." + value + ".json", function(err, data) {
                    var grouped = _.groupBy(data.skills, 'group.name');

                    chart.title(value);
                    d3.select("#twer-"+(index+1))
                      .datum(grouped)
                      .call(chart);
                });    
            });

        }
        </script>
    </body>
</html>